{"ast":null,"code":"var _jsxFileName = \"/Users/kenta/Documents/react/brand-quiz-app/pages/main.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport firebase from \"../src/firebase\";\nimport { db } from \"../src/firebase\";\nimport Quiz from \"../src/components/Quiz\";\nimport Header from \"../src/components/Header\";\nimport Buttons from \"../src/components/Buttons\";\n\nconst Main = () => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    loginEmail: \"\",\n    loginPassword: \"\",\n    email: \"\",\n    password: \"\",\n    isUserEmpty: true,\n    quiz: [],\n    count: 0,\n    answer: false,\n    correct: false,\n    answerNumber: 100\n  });\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        console.log(\"trueです！\");\n        setState(_objectSpread(_objectSpread({}, state), {}, {\n          isUserEmpty: false\n        }));\n      }\n\n      console.log(\"useEffect実行中\");\n    });\n    let list = [];\n    db.collection(\"quiz\").get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        const new_hash = {\n          text: doc.data().text,\n          choice1: doc.data().choice1,\n          choice2: doc.data().choice2,\n          choice3: doc.data().choice3,\n          choice4: doc.data().choice4,\n          answer: doc.data().answer\n        };\n        list.push(new_hash);\n      });\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        quiz: list\n      }));\n    });\n    return () => {\n      console.log('unmounting');\n    };\n  }, []);\n\n  const logout = () => {\n    firebase.auth().signOut().then(function () {}).catch(function (error) {});\n  };\n\n  const googleLogin = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n\n    if (state.isUserEmpty) {\n      console.log(\"googleでログインします\");\n      firebase.auth().signInWithPopup(provider).then(function (result) {}).catch(function (error) {});\n    } else {\n      logout();\n    }\n  };\n\n  const nextQuestion = () => {\n    const count = state.count + 1;\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      count: count,\n      answer: false\n    }));\n  };\n\n  const returnQuestion = () => {\n    const count = state.count - 1;\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      count: count\n    }));\n  };\n\n  const showAnswer = (num, answer) => {\n    if (num === answer) {\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        answerNumber: num,\n        correct: true,\n        answer: true\n      }));\n    } else {\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        answerNumber: num,\n        correct: false,\n        answer: true\n      }));\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-1486862249\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, __jsx(Header, {\n    isUserEmpty: state.isUserEmpty,\n    googleLogin: () => googleLogin(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-1486862249\" + \" \" + \"question mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, __jsx(Quiz, {\n    quiz: state.quiz[state.count],\n    showAnswer: (num, quiz) => showAnswer(num, quiz),\n    answer: state.answer,\n    correct: state.correct,\n    answerNumber: state.answerNumber,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }), __jsx(Buttons, {\n    nextQuestion: (num, quiz) => nextQuestion(),\n    returnQuestion: (num, quiz) => returnQuestion(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  })), __jsx(_JSXStyle, {\n    id: \"1486862249\",\n    __self: this\n  }, \"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rZW50YS9Eb2N1bWVudHMvcmVhY3QvYnJhbmQtcXVpei1hcHAvcGFnZXMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3SWtCIiwiZmlsZSI6Ii9Vc2Vycy9rZW50YS9Eb2N1bWVudHMvcmVhY3QvYnJhbmQtcXVpei1hcHAvcGFnZXMvbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSBcIi4uL3NyYy9maXJlYmFzZVwiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi4vc3JjL2ZpcmViYXNlXCI7XG5pbXBvcnQgUXVpeiBmcm9tIFwiLi4vc3JjL2NvbXBvbmVudHMvUXVpelwiO1xuaW1wb3J0IEhlYWRlciBmcm9tIFwiLi4vc3JjL2NvbXBvbmVudHMvSGVhZGVyXCI7XG5pbXBvcnQgQnV0dG9ucyBmcm9tIFwiLi4vc3JjL2NvbXBvbmVudHMvQnV0dG9uc1wiO1xuXG5jb25zdCBNYWluID0gKCkgPT4ge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBsb2dpbkVtYWlsOiBcIlwiLFxuICAgIGxvZ2luUGFzc3dvcmQ6IFwiXCIsXG4gICAgZW1haWw6IFwiXCIsXG4gICAgcGFzc3dvcmQ6IFwiXCIsXG4gICAgaXNVc2VyRW1wdHk6IHRydWUsXG4gICAgcXVpejogW10sXG4gICAgY291bnQ6IDAsXG4gICAgYW5zd2VyOiBmYWxzZSxcbiAgICBjb3JyZWN0OiBmYWxzZSxcbiAgICBhbnN3ZXJOdW1iZXI6IDEwMCxcbiAgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhcInRydWXjgafjgZnvvIFcIik7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICBpc1VzZXJFbXB0eTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJ1c2VFZmZlY3Tlrp/ooYzkuK1cIik7XG4gICAgfSk7XG5cbiAgICBsZXQgbGlzdCA9IFtdO1xuICAgIGRiLmNvbGxlY3Rpb24oXCJxdWl6XCIpXG4gICAgICAuZ2V0KClcbiAgICAgIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7XG4gICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3X2hhc2ggPSB7XG4gICAgICAgICAgICB0ZXh0OiBkb2MuZGF0YSgpLnRleHQsXG4gICAgICAgICAgICBjaG9pY2UxOiBkb2MuZGF0YSgpLmNob2ljZTEsXG4gICAgICAgICAgICBjaG9pY2UyOiBkb2MuZGF0YSgpLmNob2ljZTIsXG4gICAgICAgICAgICBjaG9pY2UzOiBkb2MuZGF0YSgpLmNob2ljZTMsXG4gICAgICAgICAgICBjaG9pY2U0OiBkb2MuZGF0YSgpLmNob2ljZTQsXG4gICAgICAgICAgICBhbnN3ZXI6IGRvYy5kYXRhKCkuYW5zd2VyLFxuICAgICAgICAgIH07XG4gICAgICAgICAgbGlzdC5wdXNoKG5ld19oYXNoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICBxdWl6OiBsaXN0LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygndW5tb3VudGluZycpXG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgbG9nb3V0ID0gKCkgPT4ge1xuICAgIGZpcmViYXNlXG4gICAgICAuYXV0aCgpXG4gICAgICAuc2lnbk91dCgpXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7fSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHt9KTtcbiAgfTtcblxuICBjb25zdCBnb29nbGVMb2dpbiA9ICgpID0+IHtcbiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlcigpO1xuICAgIGlmIChzdGF0ZS5pc1VzZXJFbXB0eSkge1xuICAgICAgY29uc29sZS5sb2coXCJnb29nbGXjgafjg63jgrDjgqTjg7PjgZfjgb7jgZlcIik7XG4gICAgICBmaXJlYmFzZVxuICAgICAgICAuYXV0aCgpXG4gICAgICAgIC5zaWduSW5XaXRoUG9wdXAocHJvdmlkZXIpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHt9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ291dCgpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBuZXh0UXVlc3Rpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgY291bnQgPSBzdGF0ZS5jb3VudCArIDE7XG4gICAgc2V0U3RhdGUoe1xuICAgICAgLi4uc3RhdGUsXG4gICAgICBjb3VudDogY291bnQsXG4gICAgICBhbnN3ZXI6IGZhbHNlLFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHJldHVyblF1ZXN0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvdW50ID0gc3RhdGUuY291bnQgLSAxO1xuICAgIHNldFN0YXRlKHtcbiAgICAgIC4uLnN0YXRlLFxuICAgICAgY291bnQ6IGNvdW50LFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNob3dBbnN3ZXIgPSAobnVtLCBhbnN3ZXIpID0+IHtcbiAgICBpZiAobnVtID09PSBhbnN3ZXIpIHtcbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGFuc3dlck51bWJlcjogbnVtLFxuICAgICAgICBjb3JyZWN0OiB0cnVlLFxuICAgICAgICBhbnN3ZXI6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYW5zd2VyTnVtYmVyOiBudW0sXG4gICAgICAgIGNvcnJlY3Q6IGZhbHNlLFxuICAgICAgICBhbnN3ZXI6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPEhlYWRlclxuICAgICAgICBpc1VzZXJFbXB0eT17c3RhdGUuaXNVc2VyRW1wdHl9XG4gICAgICAgIGdvb2dsZUxvZ2luPXsoKSA9PiBnb29nbGVMb2dpbigpfVxuICAgICAgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicXVlc3Rpb24gbXgtYXV0b1wiPlxuICAgICAgICA8UXVpelxuICAgICAgICAgIHF1aXo9e3N0YXRlLnF1aXpbc3RhdGUuY291bnRdfVxuICAgICAgICAgIHNob3dBbnN3ZXI9eyhudW0sIHF1aXopID0+IHNob3dBbnN3ZXIobnVtLCBxdWl6KX1cbiAgICAgICAgICBhbnN3ZXI9e3N0YXRlLmFuc3dlcn1cbiAgICAgICAgICBjb3JyZWN0PXtzdGF0ZS5jb3JyZWN0fVxuICAgICAgICAgIGFuc3dlck51bWJlcj17c3RhdGUuYW5zd2VyTnVtYmVyfVxuICAgICAgICAvPlxuXG4gICAgICAgIDxCdXR0b25zXG4gICAgICAgICAgbmV4dFF1ZXN0aW9uPXsobnVtLCBxdWl6KSA9PiBuZXh0UXVlc3Rpb24oKX1cbiAgICAgICAgICByZXR1cm5RdWVzdGlvbj17KG51bSwgcXVpeikgPT4gcmV0dXJuUXVlc3Rpb24oKX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICBcbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1haW47XG4iXX0= */\\n/*@ sourceURL=/Users/kenta/Documents/react/brand-quiz-app/pages/main.js */\"));\n};\n\nexport default Main;","map":{"version":3,"sources":["/Users/kenta/Documents/react/brand-quiz-app/pages/main.js"],"names":["React","useEffect","useState","firebase","db","Quiz","Header","Buttons","Main","state","setState","loginEmail","loginPassword","email","password","isUserEmpty","quiz","count","answer","correct","answerNumber","auth","onAuthStateChanged","user","console","log","list","collection","get","then","querySnapshot","forEach","doc","new_hash","text","data","choice1","choice2","choice3","choice4","push","logout","signOut","catch","error","googleLogin","provider","GoogleAuthProvider","signInWithPopup","result","nextQuestion","returnQuestion","showAnswer","num"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport firebase from \"../src/firebase\";\nimport { db } from \"../src/firebase\";\nimport Quiz from \"../src/components/Quiz\";\nimport Header from \"../src/components/Header\";\nimport Buttons from \"../src/components/Buttons\";\n\nconst Main = () => {\n  const [state, setState] = useState({\n    loginEmail: \"\",\n    loginPassword: \"\",\n    email: \"\",\n    password: \"\",\n    isUserEmpty: true,\n    quiz: [],\n    count: 0,\n    answer: false,\n    correct: false,\n    answerNumber: 100,\n  });\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        console.log(\"trueです！\");\n        setState({\n          ...state,\n          isUserEmpty: false,\n        });\n      }\n      console.log(\"useEffect実行中\");\n    });\n\n    let list = [];\n    db.collection(\"quiz\")\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          const new_hash = {\n            text: doc.data().text,\n            choice1: doc.data().choice1,\n            choice2: doc.data().choice2,\n            choice3: doc.data().choice3,\n            choice4: doc.data().choice4,\n            answer: doc.data().answer,\n          };\n          list.push(new_hash);\n        });\n        setState({\n          ...state,\n          quiz: list,\n        });\n      });\n    \n    return () => {\n      console.log('unmounting')\n    }\n  }, []);\n\n  const logout = () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(function () {})\n      .catch(function (error) {});\n  };\n\n  const googleLogin = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    if (state.isUserEmpty) {\n      console.log(\"googleでログインします\");\n      firebase\n        .auth()\n        .signInWithPopup(provider)\n        .then(function (result) {})\n        .catch(function (error) {});\n    } else {\n      logout();\n    }\n  };\n\n  const nextQuestion = () => {\n    const count = state.count + 1;\n    setState({\n      ...state,\n      count: count,\n      answer: false,\n    });\n  };\n\n  const returnQuestion = () => {\n    const count = state.count - 1;\n    setState({\n      ...state,\n      count: count,\n    });\n  };\n\n  const showAnswer = (num, answer) => {\n    if (num === answer) {\n      setState({\n        ...state,\n        answerNumber: num,\n        correct: true,\n        answer: true,\n      });\n    } else {\n      setState({\n        ...state,\n        answerNumber: num,\n        correct: false,\n        answer: true,\n      });\n    }\n  };\n\n  return (\n    <div>\n      <Header\n        isUserEmpty={state.isUserEmpty}\n        googleLogin={() => googleLogin()}\n      />\n      <div className=\"question mx-auto\">\n        <Quiz\n          quiz={state.quiz[state.count]}\n          showAnswer={(num, quiz) => showAnswer(num, quiz)}\n          answer={state.answer}\n          correct={state.correct}\n          answerNumber={state.answerNumber}\n        />\n\n        <Buttons\n          nextQuestion={(num, quiz) => nextQuestion()}\n          returnQuestion={(num, quiz) => returnQuestion()}\n        />\n      </div>\n      <style jsx>{`\n        \n      `}</style>\n    </div>\n  );\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}